<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.min.css">

    <script src="http://cdn.bootcss.com/jquery/1.11.2/jquery.min.js"></script>
    <script src="http://cdn.bootcss.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="css/login.css"/>
    <title>Document</title>
    <style>
        .disabled{
            background-color: #666 !important;
            cursor: not-allowed !important;
        }
    </style>
</head>
<body>
<div class="top_logo">
    <div class="logo">
        <div class="logo_img">
            <img src="images/logo.png" alt="" style="width: 100%;height: 100%;"/>
        </div>
        <div class="intro">
            <div class="intro_title"><p>爱购不够商城</p></div>
            <div class="intro_text"><p>让你购一次就停不下来的网站</p></div>
        </div>
    </div>
</div>
<div class="login_bg">
    <div class="login">
        <div class="center">
            <!--左侧图片-->
            <div class="left">
                <!--左边最大-->
                <div class="left_left left" style="width: 50%;height: 100%;">
                    <img class="imgs" src="images/login3.jpg" alt="" />
                </div>
                <!--右侧-->
                <div class="left_right left" style="width: 50%;height: 100%;">
                    <!--上边最大-->
                    <div class="LR_top" style="width: 100%;height: 60%;">
                        <img class="imgs" src="images/login2.jpg" alt=""/>
                    </div>
                    <!--下面-->
                    <div class="LR_bottom" style="width: 100%;height: 40%;">
                        <!--下面左-->
                        <div class="LRB_left left" style="width: 50%;height: 100%;">
                            <img class="imgs " src="images/login66.jpg" alt=""/>
                        </div>
                        <div class="LRB_right left" style="width: 50%;height: 100%;">
                            <img class="imgs" src="images/login9.jpg" alt="" />
                        </div>
                    </div>
                </div>
                <div class="img_text" style="height: 50px;line-height: 50px;"><p style="width: 100%;color:#f53807;">We are different every day!</p></div>
            </div>

            <!--右侧登陆框-->
            <div class="right right_box">
                <div class="right_top" style="width: 100%;height: 20%;">
                    <div class="text">
                        <div class="title">Welcome!</div>
                        <!--<div class="line"></div>-->

                    </div>
                </div>
                <div class="form">
                    <form action="">
                        <!--注册-->
                        <div id="login" style="display: none;">
                            <div class="tips">
                                <p>ajax校验</p>
                            </div>
                            <div>
                                <label>用户名：</label>
                                <input type="text" class="name" name="login_name" placeholder="输入用户名"/>
                            </div>
                            <div>
                                <label>密 &nbsp 码：</label>
                                <input type="text" placeholder="输入密码"/>
                            </div>
                            <div>
                                <label>手机号：</label>
                                <input type="text" name="iphone" class="iphone" placeholder="输入手机号"/>
                            </div>
                            <div>
                                <label>验证码：</label>
                                <input class="code" type="text" placeholder="输入验证码"/>
                                <span class="acquire ">获取验证码</span>
                            </div>


                            <div class="disLogin">
                                <button type="button" id="disLogin" value="注册">注册</button>
                            </div>

                        </div>
                        <!--登陆-->
                        <div id="sign" >
                            <div class="tip">
                                <p>正则校验</p>
                            </div>
                            <div>
                                <label>用户名：</label>
                                <input type="text" name="userName" class="nameErg" placeholder="请输入用户名或手机号"/>
                            </div>
                            <div>
                                <label>密 &nbsp 码：</label>
                                <input type="text" placeholder="请输入密码"/>
                            </div>
                            <div>
                                <label>验证码：</label>
                                <input class="code" type="text" placeholder="输入验证码"/>
                                <span class="acquire ">获取验证码</span>
                            </div>
                            <div class="dissign">
                                <button type="button" id="disSign" value="登陆">登陆</button>
                            </div>

                        </div>

                    </form>
                </div>
                <div class="signBtn" style="display: none"><p>返回登录</p></div>
                <div class="loginBtn" ><p>前往注册</p></div>
            </div>
            <!--<div class="right" >
                <form action="" class="form-group">
                    <div class="form-group">
                        <label >用户名</label>
                        <input class="form-control" type="text" name="username"/>
                        <div class="hidd" style="display:none;"><h4 >验证中...</h4><h2></h2></div>
                    </div>
                    <div class="form-group">
                        <label >手机号</label>
                        <input class="form-control" type="text" name="phone"/>
                    </div>
                    <div class="form-group">
                        <label >密码</label>
                        <input class="form-control" type="text" name="password"/>
                    </div>
                </form>
                <button class="form-control btn btn-success" >注册</button>

            </div>-->

        </div>

    </div>
</div>
<div class="copyright" style="text-align: center;font-size: 20px; margin-top: 50px;">
    <p>个人版权® </p>
    <p><span><a href="">帮助</a></span> | <span><a href="">用户反馈</a></span></p>
    <p>请联系我：17167101167</p>
    <p>qq邮箱：448335044@qq.com</p>
</div>

<script>
    $(function(){
        $('.name').blur(function(){
            var $this = $(this);
            $.ajax({
                url:'index_post.php',
                data:{name:$this.val()},
                success:function(data){
                    console.log(data);
                    /*判断是否可用变色*/
                    if(data.indexOf('遗憾')>=0){
                        $('.tips').find('p').html(data).fadeIn(200).delay(200).fadeOut(200).delay(200).fadeIn(200).delay(200).fadeOut(200).delay(200).fadeIn(200).delay(200).fadeOut(200);
                    }else{
                        $('.tips').find('p').html(data).fadeIn(1000).delay(1000).fadeOut(1000);
                    }
                }
            })
        });

        /*验证码*/
        $('.acquire').click(function(){

            if($(this).hasClass('disabled')){
                alert("请勿重复点击");
                return;
            }
            var totalTime = 4;
            /*点击直接让内容变成倒计时*/
            $(this).html('还剩'+ totalTime + "秒");
            var interId = setInterval(function(){
                totalTime--;
                if(totalTime==0){
                    /*消除定时器*/
                    clearInterval(interId);
                    /*移除类名*/
                    $('.acquire').removeClass('disabled');
                    /*更改内容*/
                    $('.acquire').html('获取验证码');
                    /*阻断后续代码执行*/
                    return;
                }
                $('.acquire').html('还剩'+ totalTime + "秒");
            },1000);
            $(this).addClass('disabled');
            /*ajax*/
            $.ajax({
                url:'index_code_json.php',
                success:function(data){
                    for(var i=0; i<data.length;i++){
                        console.log(data[i]);
                        $('.code').val(data[i].code);
                    }

                }
            })
        });
        /*手机号正则*/
        $('.iphone').blur(function() {
            var $this = $(this);
            var str = $this.val();

            var reg=/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/;
            if(reg.test(str)){
                $('.tips').find('p').html("此手机号可用").fadeIn(200).delay(200).fadeOut(200);
                /*移除类名*/
                $('.acquire').removeClass('disabled');
            }else{
                $('.tips').find('p').html("请输入正确的手机格式").fadeIn(200);
                $('.acquire').addClass('disabled');

            }
        });
        /*登录正则*/
        $('.nameErg').blur(function() {
            var $this = $(this);
            var str = $this.val();

            var reg=/^[\u4E00-\u9FA5A-Za-z0-9_]+$/;
            if(reg.test(str)){
                $('.tip').find('p').html("用你户名可用").fadeIn(200).delay(200).fadeOut(200);
                /*/!*移除类名*!/
                $('.acquire').removeClass('disabled');*/
            }else{
                $('.tip').find('p').html("用户名格式不正确").fadeIn(200);
                /*$('.acquire').addClass('disabled');*/

            }
        });
    });
    /*登陆正则效验*/
   /* var login_name= document.querySelector('input[name=userName]');
    var tip = document.getElementsByClassName('tip')[0].getElementsByTagName("p");
    console.log(tip.innerHTML);
    login_name.onblur = function(){
        console.log(this.value);
        var str = this.value;
        /!*var reg=/^[A-Za-z0-9]+$/;*!/
        var reg=/^[\u4E00-\u9FA5A-Za-z0-9_]+$/;
        if(reg.test(str)){
            alert("格式正确");
        }else(
                alert("格式不正确")
              /!* tip.html = "格式不正确";*!/
        )
    };*/

    /*登录跳转*/
    var disLogin = document.getElementById("disSign");
    disLogin.onclick = function(){
        window.location.href ="indexRoot.html";
    };
    /*注册*/
    var disLog = document.getElementById("disLogin");
    disLog.onclick = function(){
        alert("yoyo！ 注册成功,快去登录吧！");
        window.location.href ="index.html";
    };


    /*登陆注册切换*/
   /* var signBtn = document.getElementsByClassName("signBtn")[0];
    var loginBtn = document.getElementsByClassName("loginBtn")[0];
    var account = document.getElementById("account");
    var login = document.getElementById("login");
        signBtn.onclick = function(){
             login.style.display = "none";
             sign.style.display = "block";
            loginBtn.style.display = "block";
            signBtn.style.display = "none";

    };
    var loginBtn = document.getElementsByClassName("loginBtn")[0];
        loginBtn.onclick = function(){
            sign.style.display = "none";
            login.style.display = "block";
            loginBtn.style.display = "none";
            signBtn.style.display = "block";
        };*/
    $(document).ready(function(){
        $(".signBtn").click(function(){
            $("#login").slideUp(2);
            $("#sign").slideDown(2);
            $(".signBtn").slideUp(2);
            $(".loginBtn").slideDown(2);
        });
        $(".loginBtn").click(function(){
            $("#sign").slideUp(2);
            $("#login").slideDown(2);
            $(".loginBtn").slideUp(2);
            $(".signBtn").slideDown(2);

        });
    });
</script>
</body>
</html>
<script>
    /*get请求*/
    /*点击按钮事件*/
   /* var boxv = document.querySelector('input[name=username]');

    document.querySelector('input[name="username"]').onblur = function(){
        document.getElementsByClassName("hidd")[0].style.display = "block";
        /!*创建异步对象*!/
        var xhr = new XMLHttpRequest();
        /!*设置请求行*!/
        xhr.open('get','index_login.php?name='+boxv.value);
        /!*设置请求头*!/
        /!*注册状态改变事件*!/
        xhr.onreadystatechange=function()
        {
            /!*判断状态和请求是否成功并使用数据*!/
            if (xhr.readyState==4 && xhr.status==200)
            {

                /!*console.log(xhr.responseXML);*!/
                /!*document.getElementById("myDiv").innerHTML=xmlhttp.responseText;*!/
                console.log(xhr.responseText);
                /!**!/
                document.querySelector('h2').innerHTML = xhr.responseText;
                document.querySelector('h4').innerHTML = '验证完毕';
            }
        };
         /!*发送请求*!/
        xhr.send(null);
    };*/


    /*  /!*post请求*!/
     var boxv = document.querySelector('input[name=userName]');
     boxv.onblur = function(){
     /!*console.log(this.value);*!/
     document.getElementsByClassName("hidd")[0].style.display = "block";
     /!*创建异步对象*!/
     var xhr = new XMLHttpRequest();
     /!*设置请求行*!/
     xhr.open('post','index_post.php');
     /!*设置请求头*!/
     xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
     /!*注册状态改变事件*!/
     xhr.onreadystatechange=function(){
     if(xhr.readyState==4 && xhr.status==200){
     /!*console.log(xhr.responseText);*!/
     /!*document.querySelector('h5').innerHTML = xhr.responseText;*!/
     var res = xhr.responseText;
         if(res.indexOf('遗憾')>=0){
             document.querySelector('h5').innerHTML  = res;
             document.querySelector('h5').style.color = 'red';
             document.getElementById("disSign").disabled=true;
         }else{
             document.querySelector('h5').innerHTML  = res;
             document.querySelector('h5').style.color = 'green';
         }
     }
     };
    /!* 发送请求.post要传参*!/
     xhr.send('name='+boxv.value);

     };

*/
/*josn*/
  /* /!*点击按钮事件*!/
   var boxv = document.querySelector('input[name=username]');

   document.querySelector('input[name="username"]').onblur = function(){
   document.getElementsByClassName("hidd")[0].style.display = "block";
   /!*创建异步对象*!/
   var xhr = new XMLHttpRequest();
   /!*设置请求行*!/
   xhr.open('get','index_post.php');
   /!*设置请求头*!/
   /!*注册状态改变事件*!/
   xhr.onreadystatechange=function()
   {
   /!*判断状态和请求是否成功并使用数据*!/
   if (xhr.readyState==4 && xhr.status==200)
   {
      var res = JSON.parse(xhr.responseText);
       console.log(res);
       var html = "";
       html+='<table>';
       for(var i=0; i<res.length; i++){
           var currentobj = res[i];
           html+='<tr>';
           html+='<td>名字叫：'+currentobj.name+'</td><td>，年纪是：'+currentobj.age+'</td>';
           html+='</tr>';

       }
       html+='</table>';
       document.getElementById("box").innerHTML = html;


   /!**!/
  /!* document.querySelector('h2').innerHTML = xhr.responseText;
   document.querySelector('h4').innerHTML = '验证完毕';*!/
   }
   };


   /!*发送请求*!/
   xhr.send(null);
   };*/







</script>